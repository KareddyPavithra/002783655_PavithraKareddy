<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Login</title>
</head>
<body>
    <div id="container">
        <h3>Please login to go to the next page</h3>
        <form id="myForm" action="./cal.html" method="GET">
            <p>
                <label>Email id*:</label>
                <input type="text" id="emailId" name="emailId" placeholder="name@northeastern.edu">
            </p>
            <p>
                <label for="userName">Username*:</label>
                <input type="text" id="userName" name="userName" placeholder="Enter username">
            </p>

            <p>
                <label for="password">Password*:</label>
                <input type="password" id="password" name="password" placeholder="Enter password">
            </p>
            <br>
            <input type="submit" value="Login" class="button" />
            <br>
        </form>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
    <!-- <script type="text/javascript" src="jquery.redirect.min.js"></script> -->
    <script>
        $(document).ready(function (){
            $('form[id="myForm"]').validate({
                rules: {
                    emailId:{
                        required: true,
                        northeasternEmailId: true,
                    },
                    userName: {
                        required: true,
                        minlength: 3,
                        regexName: true,
                    },
                    password: {
                        required: true,
                        minlength: 8,
                        regexPassword: true,
                    },
                },
                messages:{
                    emailId: {
                        required: "Please enter an emailId to proceed",
                    },
                    userName: {
                        required:"Please enter a username to proceed",
                        minlength: "Username should contain a minimum of 3 characters",
                    },
                    password: {
                        required: "Please enter a password to proceed",
                        minlength: "Password should contain atleast 8 characters and must include a uppercase letter, lowercase letter and one digit",
                    },
                },
            });
        });

        jQuery.validator.addMethod(
            "northeasternEmailId",
            function(value, element){
                return this.optional(element) || /^.+@northeastern.edu$/.test(value);
            },
            "Please enter a northeastern emailId"
        );

        jQuery.validator.addMethod(
            "regexName",
            function(value, element){
                return(
                    this.optional(element) ||  /^(?=.{3,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/.test(value)
                );
            },
            "Please enter a valid user name"
        );

        jQuery.validator.addMethod(
            "regexPassword",
            function(value, element){
                return(
                    this.optional(element) || /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(value)
                );
            },
            "Please enter a valid password"
        );
    </script>
    
</body>
</html>